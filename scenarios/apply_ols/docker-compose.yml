services:

  activationbase:
    build: ../../images/activationBase
    volumes:
      - ai_system:/tmp

  knowledgebase:
    build: ../../images/knowledgeBase
    volumes:
      - ai_system:/tmp

  codebase:
    build: ../../images/codeBase
    volumes:
      - ai_system:/tmp

  runner:
    image: python:3.10-slim
    depends_on:
      - activationbase
      - knowledgebase
      - codebase
    volumes:
      - ai_system:/tmp
    working_dir: /images/codeBase
    command: sh -c "pip install pandas numpy scikit-learn && python run_ols.py"

volumes:
  ai_system:
